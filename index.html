<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game GhÃ©p áº¢nh</title>

<style>
/* ==== Äá»”I MÃ€U á» ÄÃ‚Y ==== */
:root{
  --bg:#0f172a;        /* ná»n chÃ­nh */
  --card:#1e293b;      /* khung */
  --main:#22c55e;      /* mÃ u nháº¥n */
  --text:#e5e7eb;
}

body{
  margin:0;
  font-family:system-ui,sans-serif;
  background:linear-gradient(135deg,#020617,#0f172a);
  min-height:100vh;
  display:flex;
  justify-content:center;
  color:var(--text);
}

.container{
  width:100%;
  max-width:420px;
  background:var(--card);
  margin:12px;
  padding:16px;
  border-radius:18px;
  box-shadow:0 20px 40px rgba(0,0,0,.5);
}

/* ===== HEADER ===== */
h2{
  text-align:center;
  margin:0;
  color:var(--main);
}

.info-box{
  margin-top:10px;
  font-size:14px;
  line-height:1.6;
}

.info-box span{
  color:#a5b4fc;
}

/* ===== GAME ===== */
#game{
  margin:14px auto;
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:0;
  background:black;
  border-radius:14px;
  overflow:hidden;
}

.piece{
  aspect-ratio:1/1;
  background-image:url("anh.jpg");
  background-size:400px 200px;
}

/* ===== CONTROLS ===== */
.controls{
  display:flex;
  gap:8px;
  margin-top:12px;
}

button{
  flex:1;
  padding:10px;
  border:none;
  border-radius:12px;
  background:var(--main);
  color:#022c22;
  font-weight:700;
  font-size:14px;
}

button:active{transform:scale(.96);}

/* ===== LEADERBOARD ===== */
#leaderboard{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  justify-content:center;
  align-items:center;
}

.board{
  background:var(--card);
  padding:16px;
  border-radius:16px;
  width:80%;
  max-width:300px;
}

.board h3{text-align:center;margin-top:0;}
</style>
</head>

<body>

<div class="container">

<h2>ğŸ§© TrÃ² chÆ¡i ghÃ©p áº£nh</h2>

<div class="info-box">
ğŸ‘¥ <b>NhÃ³m:</b> <span>NhÃ³m Lá»‹ch Sá»­ 9A</span><br>
ğŸ–¼ <b>TÃªn áº£nh:</b> <span>Há»™i nghá»‹ quá»‘c táº¿</span><br>
ğŸ“– <b>Ã nghÄ©a:</b> <span>Thá»ƒ hiá»‡n sá»± há»£p tÃ¡c, Ä‘oÃ n káº¿t giá»¯a cÃ¡c quá»‘c gia trÃªn tháº¿ giá»›i.</span><br>
â± <b>Thá»i gian:</b> <span id="time">300</span> giÃ¢y
</div>

<div id="game"></div>

<div class="controls">
  <button onclick="toggleMusic()">ğŸµ Nháº¡c</button>
  <button onclick="showBoard()">ğŸ† BXH</button>
</div>

</div>

<!-- ===== Báº¢NG Xáº¾P Háº NG ===== -->
<div id="leaderboard">
  <div class="board">
    <h3>ğŸ† Báº£ng xáº¿p háº¡ng</h3>
    <ol id="rank"></ol>
    <button onclick="closeBoard()">ÄÃ³ng</button>
  </div>
</div>

<audio id="click" src="click.mp3"></audio>
<audio id="music" src="music.mp3" loop></audio>

<script>
const rows=2, cols=4;
let time=300, musicOn=false;
const game=document.getElementById("game");
const timeEl=document.getElementById("time");
let first=null;

/* Táº O Máº¢NH */
let arr=[...Array(rows*cols).keys()];
arr.sort(()=>Math.random()-.5);

arr.forEach(i=>{
  const d=document.createElement("div");
  d.className="piece";
  d.dataset.correct=i;
  d.style.backgroundPosition=
   `-${(i%cols)*100}px -${Math.floor(i/cols)*100}px`;
  d.onclick=()=>tap(d);
  game.appendChild(d);
});

function tap(p){
  document.getElementById("click").play();
  if(!first){
    first=p;
    p.style.opacity=.5;
  }else{
    swap(first,p);
    first.style.opacity=1;
    first=null;
    check();
  }
}

function swap(a,b){
  [a.style.backgroundPosition,b.style.backgroundPosition]=
  [b.style.backgroundPosition,a.style.backgroundPosition];
  [a.dataset.correct,b.dataset.correct]=
  [b.dataset.correct,a.dataset.correct];
}

function check(){
  const p=[...document.querySelectorAll(".piece")];
  if(p.every((x,i)=>x.dataset.correct==i)){
    save();
    alert("ğŸ‰ HoÃ n thÃ nh!");
  }
}

/* TIMER */
setInterval(()=>{
  time--;
  timeEl.innerText=time;
  if(time<=0){
    alert("â° Háº¿t giá»!");
    location.reload();
  }
},1000);

/* MUSIC */
function toggleMusic(){
  const m=document.getElementById("music");
  musicOn?m.pause():m.play();
  musicOn=!musicOn;
}

/* LEADERBOARD */
function save(){
  const name=prompt("Nháº­p tÃªn:");
  if(!name)return;
  const list=JSON.parse(localStorage.getItem("rank")||"[]");
  list.push({name,score:300-time});
  list.sort((a,b)=>a.score-b.score);
  localStorage.setItem("rank",JSON.stringify(list));
}

function showBoard(){
  const list=JSON.parse(localStorage.getItem("rank")||"[]");
  const ol=document.getElementById("rank");
  ol.innerHTML="";
  list.forEach(i=>{
    const li=document.createElement("li");
    li.innerText=`${i.name} - ${i.score}s`;
    ol.appendChild(li);
  });
  document.getElementById("leaderboard").style.display="flex";
}

function closeBoard(){
  document.getElementById("leaderboard").style.display="none";
}
</script>

</body>
</html>
